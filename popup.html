<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SideFlow â€” Build-free UI</title>
  <style>
    /* Reset */
    *, *::before, *::after { box-sizing: border-box; }
    html, body { min-height: 100%; }
    body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji"; min-width: 785px; background: var(--bg); }

    /* Brand palette */
    :root {
      --brand-blue: #4C6FFB; /* deep blue */
      --brand-azure: #2FB5F1; /* azure */
      --brand-cyan: #12D6C8; /* cyan */
      --radius-lg: 16px;
      --radius-xl: 22px;
    }

    /* Themes */
    [data-theme="dark"] {
      --bg: #0b0f14;
      --card: #0e1319;
      --text: #e5e7eb;
      --muted: #94a3b8;
      --surface: rgba(255, 255, 255, 0.06);
      --border: rgba(255, 255, 255, 0.12);
      --chip: rgba(255, 255, 255, 0.06);
      --chip-hover: rgba(255, 255, 255, 0.12);
      --ring: rgba(47, 181, 241, 0.6);
      --shadow: 0 10px 30px rgba(0,0,0,0.5);
    }
    [data-theme="light"] {
      --bg: #e9eff5;           /* muted cool gray */
      --card: #f4f7fa;         /* soft panel */
      --text: #1f2937;         /* slate-800 */
      --muted: #334155;        /* slate-700 */
      --surface: #e8edf3;      /* tinted surface */
      --border: #cbd5e1;       /* slate-300 */
      --chip: #eef2f6;
      --chip-hover: #e6edf5;
      --ring: rgba(47, 181, 241, 0.55);
      --shadow: 0 10px 30px rgba(15, 23, 42, 0.18);
    }

    .gradient { background-image: linear-gradient(90deg, var(--brand-blue), var(--brand-azure), var(--brand-cyan)); }
    .text-gradient { background: linear-gradient(90deg, var(--brand-blue), var(--brand-azure), var(--brand-cyan)); -webkit-background-clip: text; background-clip: text; color: transparent; }

    /* Layout */
    .wrap { min-height: 100vh; background: var(--bg); color: var(--text); padding: 24px; position: relative; overflow: hidden; }
    .glow::before, .glow::after {
      content: ""; position: absolute; inset: 0; pointer-events: none;
      background: radial-gradient(1200px 1200px at 70% -10%, rgba(18,214,200,0.08), transparent 60%),
                  radial-gradient(800px 800px at 10% 10%, rgba(76,111,251,0.08), transparent 60%);
      mix-blend-mode: normal; z-index: -1;
    }
    [data-theme="light"] .glow::before { background: radial-gradient(1200px 1200px at 70% -10%, rgba(18,214,200,0.06), transparent 60%), radial-gradient(800px 800px at 10% 10%, rgba(76,111,251,0.06), transparent 60%); }

    /* Extension-friendly width */
    .card-shell { max-width: 800px; margin: 0 auto; position: relative; }
    /* If you need a wider Options page, change to 720px or 960px */

    .card-border { padding: 1px; border-radius: 24px; background: linear-gradient(180deg, rgba(255,255,255,0.18), rgba(255,255,255,0.06), rgba(255,255,255,0.12)); }
    [data-theme="light"] .card-border { background: linear-gradient(180deg, #D3DEEE, #EEF2F6, #CFE7E9); }
    .card { background: var(--card); border-radius: 24px; padding: 20px; box-shadow: var(--shadow); border: 1px solid var(--border); backdrop-filter: blur(6px); }

    /* Header */
    .header { display: flex; align-items: center; justify-content: space-between; gap: 12px; }
    .logo-wrap { display: flex; align-items: center; gap: 10px; }
    .logo-box { width: 40px; height: 40px; padding: 1px; border-radius: 14px; }
    .logo-inner { background: #0b0f14; width: 100%; height: 100%; border-radius: 14px; display: grid; place-items: center; overflow: hidden; }
    .subtitle { margin-top: 2px; font-size: 12px; color: var(--muted); }

    /* Controls */
    .row { display: grid; grid-template-columns: 1fr; gap: 10px; }

    .field { position: relative; }
    .field input { width: 100%; padding: 10px 120px 10px 34px; border-radius: 14px; border: 1px solid var(--border); background: var(--chip); color: var(--text); font-size: 14px; outline: none; }
    .field input::placeholder { color: color-mix(in oklab, var(--text) 50%, transparent); opacity: .7; }
    .field .left-icon { position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: var(--muted); }
    .field .use-page { position: absolute; right: 6px; top: 50%; transform: translateY(-50%); border: 1px solid var(--border); background: var(--chip); color: var(--muted); padding: 6px 8px; border-radius: 12px; font-size: 12px; cursor: pointer; display: inline-flex; align-items: center; gap: 6px; }
    .field .use-page:hover { background: var(--chip-hover); color: var(--text); }
    .field .use-page .icon { display: none; }

    .btn { display: inline-flex; align-items: center; justify-content: center; gap: 8px; border-radius: 14px; padding: 10px 12px; font-size: 14px; cursor: pointer; border: 1px solid transparent; transition: filter .15s ease, background .15s ease, border .15s ease; }
    .btn:hover { filter: brightness(.85); }
    .btn:active { filter: brightness(.75); }
    .btn.primary { color: #fff; border-color: transparent; }
    .btn.primary.gradient {
      box-shadow: 0 8px 20px rgba(0,0,0,0.25);
      background-clip: padding-box;
      border: none;
    }
    .btn.ghost { background: var(--chip); border-color: var(--border); color: var(--text); }
    .btn.ghost:hover { background: var(--chip-hover); }
    .btn.danger { background: linear-gradient(90deg, #f43f5e, #fb7185); color: #fff; }

    .icon-btn { width:32px; height:32px; display:inline-flex; align-items:center; justify-content:center; border-radius:12px; border:1px solid var(--border); background:var(--chip); color:var(--muted); cursor:pointer; padding:0; }
    .icon-btn:hover { background:var(--chip-hover); color:var(--text); }

    /* Segmented */
    .seg { display: inline-flex; gap: 6px; background: var(--chip); border: 1px solid var(--border); padding: 5px; border-radius: 14px; }
    .seg button { border: 0; background: transparent; color: var(--muted); padding: 6px 10px; border-radius: 10px; font-size: 12px; cursor: pointer; }
    .seg button.active {
      background: linear-gradient(90deg, var(--brand-blue), var(--brand-azure), var(--brand-cyan));
      color: #fff;
      box-shadow: 0 6px 16px rgba(5, 150, 200, .2);
      background-clip: padding-box;
    }

    /* Favorites */
    .favs-wrap { display: flex; flex-direction: column; gap: 8px; }
    .favs { display: flex; gap: 8px; overflow-x: auto; padding-bottom: 2px; }
    .fav { width: 64px; flex: 0 0 auto; display: flex; flex-direction: column; align-items: center; position: relative; }
    .fav .tile { width: 44px; height: 44px; border-radius: 12px; display: grid; place-items: center; background: var(--chip); border: 1px solid var(--border); cursor: pointer; }
    .fav .tile:hover { background: var(--chip-hover); }
    .fav .label { margin-top: 6px; width: 100%; text-align: center; font-size: 10px; color: var(--text); opacity: .9; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .fav .remove { position: absolute; top: -4px; right: -4px; width: 18px; height: 18px; border-radius: 999px; border: 0; cursor: pointer; display: none; align-items: center; justify-content: center; font-size: 12px; color: #fff; background: color-mix(in oklab, var(--bg) 25%, black); }
    .fav:hover .remove { display: inline-flex; }

    .hint { font-size: 12px; color: var(--muted); }

    /* Footer glow */
    .bottom-glow { position: absolute; left: 50%; bottom: -64px; width: 85%; height: 120px; transform: translateX(-50%); filter: blur(36px); background: radial-gradient(420px 160px at center, color-mix(in oklab, var(--brand-azure) 50%, transparent), transparent 65%); pointer-events: none; }

    /* Toggle */
    .toggle { width: 56px; height: 32px; border-radius: 999px; border: 0; cursor: pointer; padding: 2px; position: relative; }
    .toggle.dark { background: linear-gradient(90deg, var(--brand-blue), var(--brand-azure), var(--brand-cyan)); }
    .toggle.light { background: #94a3b8; }
    .toggle .knob { position: absolute; top: 3px; left: 3px; width: 26px; height: 26px; border-radius: 999px; background: #fff; display: grid; place-items: center; transition: transform .2s ease; box-shadow: 0 2px 8px rgba(0,0,0,.25); }
    .toggle.light .knob { transform: translateX(0); }
    .toggle.dark .knob { transform: translateX(24px); }

    .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); border: 0; }

    /* Ultra-compact tweaks for narrow side panels */
    @media (max-width: 380px) {
      .wrap { padding: 16px; }
      .field input { padding-right: 46px; }
      .field .use-page { width: 36px; padding: 0; justify-content: center; }
      .field .use-page .txt { display: none; }
      .field .use-page .icon { display: block; }
      .btn { width: 100%; }
    }
    /* Place action button inline with the URL field on wider popups */
    @media (min-width: 560px) { .row { grid-template-columns: 1fr auto; align-items: center; } }
  </style>
</head>
<body>
  <div class="wrap glow">
    <div class="card-shell">
      <div class="card-border">
        <div class="card">
          <header class="header">
            <div class="logo-wrap">
              <div class="logo-box gradient" aria-hidden="true">
                <div class="logo-inner">
                  <!-- App logo -->
                  <img src="logo.png" alt="SideFlow logo" style="width:70%;height:70%;object-fit:contain;display:block;" />
                </div>
              </div>
              <div>
                <div class="text-gradient" style="font-weight:600;font-size:20px;line-height:1">SideFlow</div>
                <div class="subtitle">Open any site in the Side Panel</div>
              </div>
            </div>
            <div style="display:flex;align-items:center;gap:10px;font-size:13px;color:var(--muted)">
              <span class="hide-on-xs">Appearance</span>
              <button id="themeToggle" class="toggle dark" aria-label="Switch theme" role="switch" aria-checked="true">
                <span class="sr-only">Toggle dark / light</span>
                <span class="knob" aria-hidden="true">
                  <svg id="iconMoon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
                  <svg id="iconSun" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none"><circle cx="12" cy="12" r="4"/><path d="M12 2v2m0 16v2M4 12H2m20 0h-2M5 5l-1.5-1.5M20.5 20.5 19 19M19 5l1.5-1.5M4.5 20.5 6 19"/></svg>
                </span>
              </button>
            </div>
          </header>

          <section style="margin-top:16px" class="row">
            <div class="field">
              <span class="left-icon" aria-hidden="true">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
              </span>
              <input id="urlInput" type="text" placeholder="https://example.com" />
              <button class="use-page" id="usePageBtn" title="Use current page">
                <span class="icon" aria-hidden="true">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
                </span>
                <span class="txt">Use current page</span>
              </button>
            </div>
            <button id="openBtn" class="btn primary gradient">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M7 17L17 7"/><path d="M7 7h10v10"/></svg>
              Open
            </button>
          </section>

          <section style="margin-top:14px" class="favs-wrap">
            <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap">
              <div class="seg" id="scopeSeg">
                <button data-value="tab" class="active">This tab only</button>
                <button data-value="global">Global (all tabs)</button>
              </div>
            </div>

            <div id="favorites" class="favs" aria-label="Favorites speed dial"></div>
          </section>

          <p class="hint" style="margin-top:10px">Press <kbd style="background:var(--chip); padding:2px 6px; border-radius:6px; border:1px solid var(--border)">Enter</kbd> to open. We'll normalize inputs like <span style="font-weight:600">example.com</span></p>

          <section style="margin-top:22px">
            <div style="display:flex;align-items:center;justify-content:space-between;">
              <div class="hint" style="font-weight:600;color:var(--text)">Open SideFlows (this window)</div>
              <button id="closeAll" class="btn ghost" style="padding:6px 10px;font-size:12px">Close all</button>
            </div>
            <div id="sideflows" style="margin-top:10px; min-height:200px; background:var(--chip); border:1px solid var(--border); padding:18px; border-radius:14px;"></div>
          </section>

          <div class="bottom-glow"></div>
        </div>
      </div>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
